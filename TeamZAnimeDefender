

-- Detecting device type (mobile or PC)
local UserInputService = game:GetService("UserInputService")
local isMobile = UserInputService.TouchEnabled -- Checks if the device has touch input

-- Creating the user interface (GUI)
local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local RerollButton = Instance.new("TextButton")
local RejoinButton = Instance.new("TextButton")

-- GUI settings (adaptive for mobile and PC)
ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

Frame.Size = UDim2.new(0, 300, 0, 200)
Frame.Position = UDim2.new(0.5, -150, 0.5, -100)
Frame.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
Frame.Parent = ScreenGui
Frame.Active = true
Frame.Draggable = true -- Make the frame draggable for both mobile and PC

-- Adjust button sizes and layout depending on the device
if isMobile then
    -- For mobile, we want larger buttons and text
    RerollButton.Size = UDim2.new(0, 250, 0, 60)
    RerollButton.TextScaled = true
    RejoinButton.Size = UDim2.new(0, 250, 0, 60)
    RejoinButton.TextScaled = true
else
    -- For PC, we can have smaller buttons
    RerollButton.Size = UDim2.new(0, 200, 0, 50)
    RejoinButton.Size = UDim2.new(0, 200, 0, 50)
end

-- Button for Trait Reroll
RerollButton.Position = UDim2.new(0.5, -RerollButton.Size.X.Offset / 2, 0, 30)
RerollButton.Text = "Activate Trait Reroll"
RerollButton.Parent = Frame
RerollButton.BackgroundColor3 = Color3.fromRGB(85, 170, 255)

-- Button for Rejoin
RejoinButton.Position = UDim2.new(0.5, -RejoinButton.Size.X.Offset / 2, 0, 110)
RejoinButton.Text = "Rejoin Server"
RejoinButton.Parent = Frame
RejoinButton.BackgroundColor3 = Color3.fromRGB(85, 255, 85)

-- Action when the Reroll Button is clicked
RerollButton.MouseButton1Click:Connect(function()
    print("Trait Reroll activated!")
    -- Call the function for Trait Reroll
    traitReroll()
end)

-- Action when the Rejoin Button is clicked
RejoinButton.MouseButton1Click:Connect(function()
    print("Rejoining Server...")
    -- Use the function to rejoin a new server
    game:GetService("TeleportService"):Teleport(game.PlaceId)
end)

-- Function for Trait Reroll (rollback included)
function traitReroll()
    local Players = game:GetService("Players")
    local player = Players.LocalPlayer
    local traitRerollsUsed = 0 -- Simulating used rerolls
    local passiveObtained = false -- Simulating if the desired passive is obtained

    -- Loop for reroll
    while not passiveObtained and traitRerollsUsed < 5 do
        -- Simulating a trait reroll
        traitRerollsUsed = traitRerollsUsed + 1
        passiveObtained = (math.random(1, 10) == 1) -- 1 in 10 chance
        wait(2)
    end

    -- If the passive is not obtained, kick and rollback
    if not passiveObtained then
        local rerollsBeforeRejoin = traitRerollsUsed
        player:Kick("Rejoining a new server to rollback...")

        -- Rejoin a new server
        wait(5)
        game:GetService("TeleportService"):Teleport(game.PlaceId)

        -- Restore rerolls after rejoining the new server
        traitRerollsUsed = rerollsBeforeRejoin
        print("Rerolls restored: " .. rerollsBeforeRejoin)
    else
        print("Desired passive obtained!")
    end
end
